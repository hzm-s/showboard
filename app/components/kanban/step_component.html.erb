<%= render Ui::Board::ColumnComponent.new(size: states.size) do |ui_column| %>
  <%= tag.div data: { controller: 'item-counter' } do %>

    <%= render Ui::Board::ColumnHeaderComponent.new(main_title: name, sub_titles: has_buffer? ? states.map(&:name) : []) do |h| %>
      <% h.with_context_menu do %>
        <%= render Ui::ContextMenuComponent.new %>
      <% end -%>
      <% h.with_counter do %>
        <%= render Kanban::ItemCounterComponent.new(limit: limit) %>
      <% end -%>
    <% end -%>

    <%= tag.div class: %w(px-2) do %>
      <% if has_buffer? %>
        <%= tag.div class: %w(flex flex-row justify-between) do %>
          <% states.each do |state| %>
            <%= render Kanban::StateComponent.new(state: state, work_flow: @work_flow, can_add: initial_step?) %>
          <% end -%>
        <% end -%>
      <% else -%>
        <%= render Kanban::StateComponent.new(state: @step.first_state, work_flow: @work_flow, can_add: initial_step?) %>
      <% end -%>
    <% end -%>

  <% end -%>
<% end -%>

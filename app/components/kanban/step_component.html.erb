<% bg_color = 'bg-white' %>
<%= tag.div class: %w(flex-shrink-0), style: "flex-basis: #{width}rem" do %>
  <%= tag.div class: %W(relative pb-2 #{bg_color} border border-gray-200 rounded-lg drop-shadow-md), data: { controller: 'item-counter' } do %>
    <%= render Board::ColumnHeaderComponent.new(name: name, limit: limit) %>

    <%= tag.div class: %w(h-full overflow-y-auto) do %>
      <%= tag.div style: "max-height:79vh" do %>

        <%= tag.div class: %w(px-2), style: "#{footer? && 'padding-bottom: 4rem;'}" do %>
          <% if state_size > 1 %>
            <%= tag.div class: %w(flex flex-row justify-between) do %>
              <% step.states.each do |state| %>
                <%= render Kanban::StateComponent.new(state: state, work_flow: work_flow, has_sibling: true) %>
              <% end -%>
            <% end -%>
          <% else -%>
            <% step.states.each do |state| %>
              <%= render Kanban::StateComponent.new(state: state, work_flow: work_flow, has_sibling: false) %>
            <% end -%>
          <% end -%>
        <% end -%>

      <% end -%>
    <% end -%>

    <% if footer? %>
      <%= tag.div class: %W(block absolute bottom-0 w-full #{bg_color} rounded-lg pt-2 pb-2 px-2) do %>
        <%= footer %>
      <% end -%>
    <% end -%>
  <% end -%>
<% end -%>

<%= tag.div class: %w(flex-shrink-0), style: "flex-basis: #{width}rem", data: { controller: 'item-counter' } do %>
  <%= tag.div class: %W(pb-2 bg-white border border-gray-200 rounded-lg drop-shadow-md) do %>
    <%= render Kanban::StepHeaderComponent.new(step: @step) %>
    <%= tag.div class: %w(px-2) do %>
      <% if states.size > 1 %>
        <%= tag.div class: %w(flex flex-row justify-between) do %>
          <% states.each do |state| %>
            <%= render Kanban::StateComponent.new(state: state, work_flow: @work_flow, can_add: initial_step?) %>
          <% end -%>
        <% end -%>
      <% else -%>
        <% states.each do |state| %>
          <%= render Kanban::StateComponent.new(state: state, work_flow: @work_flow, can_add: initial_step?) %>
        <% end -%>
      <% end -%>
    <% end -%>
  <% end -%>
<% end -%>
